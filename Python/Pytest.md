## pytest

앞서 살펴본 파이썬 라이브러리인 unittest 보다 사용하기 쉬운? 이해하기 쉬운 pytest에 대해 공부해보려 한다.

```bash
# python3 기준
$ pip3 install pytest
```

**pytest**는 `test_`로 생성되어 있는 파일은 모두 테스트 파일로 인식하여 테스트를 진행한다. 여기서 파일명만 `test_`면 되는 것이 아니라 함수명도 역시 `test_`로 작성되어야 한다.

```python
# test_pytest.py
def plus(a, b):
    return a + b

def minus(a, b):
    return a - b
```

앞에서 unittest에 대해 공부할 때와 같이 `plus`와 `minus` 함수를 위와 같이 작성했다. 여기서 테스트 코드를 작성하는데, 위에서 언급한 바와 같이 `test_`로 함수를 생성하면 되고 `assert`를 이용해 결과값을 비교한다.

```python
def test_plus():
    assert plus(5, 4) == 7
```

```bash
$ pytest
======================================================================= test session starts ========================================================================
platform darwin -- Python 3.7.3, pytest-5.4.3, py-1.9.0, pluggy-0.13.1
rootdir: python/study/
collected 1 item                                                                                                                                                   

test_pytest.py F                                                                                                                                               [100%]

============================================================================= FAILURES =============================================================================
____________________________________________________________________________ test_plus _____________________________________________________________________________

    def test_plus():
>       assert plus(5, 4) == 7
E       assert 9 == 7
E        +  where 9 = plus(5, 4)

test_pytest.py:8: AssertionError
===================================================================== short test summary info ======================================================================
FAILED test_case.py::test_plus - assert 9 == 7
======================================================================== 1 failed in 0.06s =========================================================================
```

`unittest`의 경우에는 실행시 해당 unittest 파일을 직접 실행시켰어야했는데, 이와 반대로 `pytest`는 사용하기 매우 쉬웠던 것 중 하나가 바로 `test_` 로 시작하는 파일은 모두 테스트 파일로 인식하여 테스트를 자동으로 진행한다는 점이다. 



그리고 가장 좋았던 점 중 하나는 바로 assert 인데, 물론 unittest 역시 assert를 그냥 사용해도 좋다. (그렇지만 unittest를 쓰는 만큼 unittest의 method로 존재하는 assert 종류를 사용하는게 더 맞지 않을까 생각된다.) assert 사용하고 그 뒤에 조건은 조건문을 짜듯이 조건을 만들어도 되기 때문이다. (읽다보니 설명이 어려운 느낌인데, 예시를 보자!)

```python
def test_plus():
    assert plus(5, 4) == 9
    assert plus(5, 4) in [9, 7, 2]
    assert plus(3, 1) is not None
    assert plus(3, 10) is None
```

위와 같이 assert 뒤에 조건문처럼 작성하면 된다는 점에서 개발자에게 친숙한 모습이라고 생각했다. 나는 처음 unittest를 만났을 때 unittest는 저렇게하면 안되는 줄 알고 method 종류를 일일히 찾아가면서 사용했다. (멍청이) 

